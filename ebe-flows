#!/usr/bin/env python3

import argparse
import fileinput
from functions import calculate_flows, split_events


parser = argparse.ArgumentParser(description='''Calculate flow coefficients v_n from
        standard particle info.''')
parser.add_argument('files', nargs='*',
        help="Files to read.  Omit or use '-' to read from stdin.")
parser.add_argument('-n', '--vn', type=int, nargs=2, default=[2,6],
        help="Range of v_n to calculate [two arguments].  Default is 2 6.")
args = parser.parse_args()


vnmin,vnmax = args.vn


def main():
    with fileinput.input(files=args.files,openhook=fileinput.hook_compressed) as f:
        for event in split_events(f):
            print(*calculate_flows(event,vnmin=vnmin,vnmax=vnmax))


if __name__ == "__main__":
    main()
